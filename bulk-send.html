<!DOCTYPE html>
<html lang="bg">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Масово изпращане на картички</title>
    <link rel="stylesheet" href="bulk-send.css">
</head>
<body>
    <header class="grid-container">
        <img src="img/logo.jpeg" alt="лого" width="150">
        <h1>Система за поздравителни картички</h1>
        <nav>
            <a href="homepage.html">Начало</a>
            <a href="create-card.html">Създай картичка</a>
            <a href="bulk-send.html">Масово изпращане</a>
        </nav>
    </header>
    <div style="height: 120px;"></div> <!-- За да не се скрива съдържанието под фиксирания header -->
    <main>
        <section class="step-section active" id="step1">
            <h2>1. Качи CSV файл с получатели</h2>
            <p>CSV файлът трябва да съдържа:</p> 
            <ul>
                <li>Заглавен ред "<strong>име, имейл, пожелание</strong>"</li>
                <li>Поне един валиден запис</li>
            </ul>
            
            <span id="errorMsg" class="error-msg"></span>
            <input type="file" id="csvFile" accept=".csv">
        </section>

        <section class="step-section" id="step2">
            <!-- За стъпка 2 -->
            <button id="backToStep1Btn" class="back-arrow" type="button" aria-label="Назад">&#8592;</button>
            <h2>2. Преглед на данните</h2>
            <table id="previewTable"></table>
            <div id="pagination" style="margin-top: 10px;"></div>
            <div style="margin-top:24px;">
                <button id="toStep3Btn">Продължи</button>
            </div>
        </section>
        <section class="step-section" id="step3">
            <!-- За стъпка 3 -->
            <button id="backToStep2Btn" class="back-arrow" type="button" aria-label="Назад">&#8592;</button>
            <h2>3. Избор на шаблон за картичка</h2>
            <div id="templateSelector" class="template-selector">
                <label>
                    <input type="radio" name="template" value="template1.jpg" checked>
                    <img src="templates/template1.jpg" alt="Шаблон 1" crossorigin="anonymous">
                </label>
                <label>
                    <input type="radio" name="template" value="template2.jpg">
                    <img src="templates/template2.jpg" alt="Шаблон 2" crossorigin="anonymous">
                </label>
                <label>
                    <input type="radio" name="template" value="template3.jpg">
                    <img src="templates/template3.jpg" alt="Шаблон 3" crossorigin="anonymous">
                </label>
            </div>
            <div id="cardViewer" style="text-align: center;">
            <div id="singleCardContainer"></div>
                <div style="margin-top: 10px;">

                    <button id="prevBtn" class="prev">&#10094; Предишна</button>
                    <span id="cardIndexInfo">Картичка 0 от 0</span>
                    <button id="nextBtn" class="next">Следваща &#10095;</button>

                </div>
            </div>
            <div id="progressContainer" style="margin-top: 20px; display: none;">
                <label for="progressBar">Изпращане на картички:</label>
                <progress id="progressBar" value="0" max="100" style="width: 100%; height: 20px;"></progress>
                <div id="progressText" style="text-align: center; margin-top: 5px;">0% изпратени</div>
            </div>
            <div style="margin-top:24px;">
                <button id="sendAllBtn">Изпрати всички картички</button>
            </div>
        </section>

        <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
        <script src="bulk-send.js"></script>
    </main>
</body>
</html>